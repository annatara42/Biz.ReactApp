{"version":3,"sources":["index.js","tree.js"],"names":["collect","props","deepdash","_","initialState","active","tree","Object","objectSpread","module","id","children","collapsed","leaf","App","state","renderNode","node","isFolder","hasOwnProperty","react_default","a","createElement","es6","key","name","holdToDisplay","onItemClick","_this","handleContextClick","caption","Toolbar","FloatLeft","react_icons_kit_default","icon","folder","file","ToolbarFileFolder","react","title","folderPlus","onClick","addItem","filePlus","renderFileFolderToolbar","itemType","newItem","concat","Date","now","newTree","mapDeep","item","parentValue","cloneItem","assign","push","setState","e","_ref","action","renameObj","findDeep","childrenPath","response","prompt","value","o","index","some","getNode","i","Array","isArray","splice","deleteFromTree","toggleCollapse","_ref2","resetState","console","log","handleChange","this","className","chevronsRight","chevronsDown","es2015","draggable","bar","LightScrollbar","react_ui_tree_default","paddingLeft","onChange","style","overflow","height","packageJSON","version","JSON","stringify","data","Component","styled","div","_templateObject","_templateObject2","span","_templateObject3","_templateObject4","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.60c97fc7.chunk.js","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Tree from \"react-ui-tree\";\nimport cx from \"classnames\";\nimport initialTree from \"./tree\";\nimport packageJSON from \"../package.json\";\nimport Icon from \"react-icons-kit\";\nimport { folder } from \"react-icons-kit/feather/folder\";\nimport { file } from \"react-icons-kit/feather/file\";\nimport { folderPlus } from \"react-icons-kit/feather/folderPlus\";\nimport { filePlus } from \"react-icons-kit/feather/filePlus\";\nimport { chevronsRight } from \"react-icons-kit/feather/chevronsRight\";\nimport { chevronsDown } from \"react-icons-kit/feather/chevronsDown\";\nimport styled from \"styled-components\";\nimport { ContextMenu, MenuItem, ContextMenuTrigger } from \"react-contextmenu\";\nimport _ from \"lodash\";\nimport { StrollableContainer } from \"react-stroller\";\nimport deepdash from \"deepdash\";\n\nimport \"./styles.css\";\nimport \"react-ui-tree/dist/react-ui-tree.css\";\nimport \"./theme.css\";\nimport \"./react-contextmenu.css\";\n\n// add deepdash to lodash\ndeepdash(_);\n\nfunction collect(props) {\n  return props;\n}\n\nfunction deleteFromTree(o, id) {\n  function getNode(a, i) {\n    if (a.id === id) {\n      index = i;\n      return true;\n    }\n    if (Array.isArray(a.children) && a.children.some(getNode)) {\n      if (~index) {\n        a.children.splice(index, 1);\n        index = -1;\n      }\n      return true;\n    }\n  }\n\n  var index = -1;\n  [o].some(getNode);\n}\n\nconst initialState = {\n  active: null,\n  tree: {\n    ...initialTree\n  },\n  collapsed: false // start with unmodified tree\n};\n\nclass App extends Component {\n  state = initialState;\n\n  renderNode = node => {\n    const renderFileFolderToolbar = (isFolder, caption) => (\n      <Toolbar>\n        <FloatLeft>\n          <Icon icon={isFolder ? folder : file} />\n          {caption}\n        </FloatLeft>\n        <ToolbarFileFolder>\n          {isFolder && (\n            <Fragment>\n              <Icon\n                title=\"New Folder\"\n                icon={folderPlus}\n                onClick={() => this.addItem(\"folder\", node)}\n              />\n              <Icon\n                title=\"New File\"\n                icon={filePlus}\n                onClick={() => this.addItem(\"file\", node)}\n              />\n            </Fragment>\n          )}\n        </ToolbarFileFolder>\n      </Toolbar>\n    );\n\n    /*const attributes = {\n      \"data-count\": 0,\n      className: \"example-multiple-targets well\"\n    };*/\n\n    const isFolder = node.hasOwnProperty(\"children\");\n    return (\n      <ContextMenuTrigger\n        id=\"FILE_CONTEXT_MENU\"\n        key={node.id}\n        name={node.id}\n        collect={collect}\n        holdToDisplay={-1}\n        onItemClick={this.handleContextClick}\n      >\n        {renderFileFolderToolbar(isFolder, node.module)}\n      </ContextMenuTrigger>\n    );\n  };\n\n  addItem = (itemType, active) => {\n    const { tree } = this.state;\n    const newItem =\n      itemType === \"folder\"\n        ? {\n            id: `root-${Date.now()}`,\n            module: `New ${itemType}`,\n            children: [],\n            collapsed: false\n          }\n        : { id: `${Date.now()}`, leaf: true, module: `New ${itemType}` };\n\n    const newTree = _.mapDeep(tree, (item, key, parentValue) => {\n      const cloneItem = Object.assign({}, item);\n      if (cloneItem) {\n        if (cloneItem.id === active.id && cloneItem.children) {\n          // folder\n          cloneItem.children.push(newItem);\n        }\n      }\n      return cloneItem;\n    });\n\n    this.setState({ ...newTree });\n  };\n\n  handleContextClick = (e, { action, name: id }) => {\n    const { tree } = this.state;\n\n    switch (action) {\n      case \"rename\":\n        const renameObj = _.findDeep(tree, item => item.id === id, {\n          childrenPath: \"children\"\n        });\n        const response = prompt(\"Please rename\", renameObj.value.module);\n\n        if (response === \"\") {\n          // ignore empty string\n          return;\n        }\n        renameObj.value.module = response;\n        this.setState(\n          _.mapDeep(\n            tree,\n            item =>\n              item.id === id\n                ? {\n                    ...item,\n                    ...renameObj.value\n                  }\n                : item,\n            { childrenPath: \"children\" }\n          )\n        );\n        break;\n      case \"delete\":\n        deleteFromTree(tree, id);\n        this.setState({\n          tree\n        });\n        break;\n      default:\n    }\n  };\n\n  toggleCollapse = () => {\n    this.setState(({ collapsed }) => ({ collapsed: !collapsed }));\n  };\n\n  // just for the demo to get the initialState back\n  // ---> not working & not sure why\n  resetState = () => {\n    console.log(\"reset\", initialState);\n    // this.setState({ tree: {} });\n    this.setState({ tree: Object.assign({}, initialState.tree) });\n  };\n\n  render() {\n    const { collapsed } = this.state;\n\n    return (\n      <div>\n        <div className=\"tree\">\n          <Toolbar>\n            <FloatLeft>\n              <Icon\n                title={collapsed ? \"expand\" : \"collapse\"}\n                icon={collapsed ? chevronsRight : chevronsDown}\n                onClick={this.toggleCollapse}\n              />\n              <span>Storage location</span>\n            </FloatLeft>\n          </Toolbar>\n          {!collapsed && (\n            <StrollableContainer draggable bar={LightScrollbar}>\n              <Tree\n                paddingLeft={20}\n                tree={this.state.tree}\n                onChange={this.handleChange}\n                renderNode={this.renderNode}\n              />\n            </StrollableContainer>\n          )}\n        </div>\n        <div\n          className=\"inspector\"\n          style={{ overflow: \"hidden\", height: \"100vh\" }}\n        >\n          <StrollableContainer draggable>\n            <h1>\n              {packageJSON.name} {packageJSON.version}\n            </h1>\n            <button onClick={this.resetState}>Reset</button>\n            <pre>{JSON.stringify(this.state.tree, null, \"  \")}</pre>\n          </StrollableContainer>\n        </div>\n\n        <ContextMenu id=\"FILE_CONTEXT_MENU\">\n          {/* Add copy / cut later */}\n          {/* <MenuItem data={{ action: \"copy\" }} onClick={this.handleContextClick}>\n            Copy\n          </MenuItem>\n          <MenuItem divider /> */}\n          <MenuItem\n            data={{ action: \"rename\" }}\n            onClick={this.handleContextClick}\n          >\n            Rename\n          </MenuItem>\n          <MenuItem\n            data={{ action: \"delete\" }}\n            onClick={this.handleContextClick}\n          >\n            Delete\n          </MenuItem>\n        </ContextMenu>\n      </div>\n    );\n  }\n\n  handleChange = tree => {\n    this.setState({\n      tree: tree\n    });\n  };\n}\n\nconst LightScrollbar = styled.div`\n  width: 10px;\n  background-color: #fff;\n  opacity: 0.7;\n  border-radius: 4px;\n  margin: 4px;\n`;\nconst Toolbar = styled.div`\n  position: relative;\n  display: flex;\n  color: #d8e0f0;\n  z-index: +1;\n  /*border: 1px solid white;*/\n  padding-bottom: 4px;\n  i {\n    margin-right: 5px;\n    cursor: pointer;\n  }\n  i :hover {\n    color: #d8e0f0;\n  }\n`;\n\nconst FloatLeft = styled.span`\n  padding-left: 4px;\n  width: 100%;\n`;\n\nconst ToolbarFileFolder = styled.div`\n  position: absolute;\n  text-align: right;\n  width: 92%;\n  color: transparent;\n  &:hover {\n    color: #d8e0f0;\n  }\n`;\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","export default {\n  module: \"react-ui-tree\",\n  id: \"root-0\",\n  children: [\n    {\n      id: \"root-1\",\n      module: \"dist\",\n      collapsed: true,\n      children: [\n        {\n          id: \"0\",\n          module: \"node.js\",\n          leaf: true\n        },\n        {\n          id: \"1\",\n          module: \"react-ui-tree.css\",\n          leaf: true\n        },\n        {\n          id: \"2\",\n          module: \"react-ui-tree.js\",\n          leaf: true\n        },\n        {\n          id: \"3\",\n          module: \"tree.js\",\n          leaf: true\n        }\n      ]\n    },\n    {\n      id: \"root-2\",\n      module: \"example\",\n      children: [\n        {\n          id: \"4\",\n          module: \"app.js\",\n          leaf: true\n        },\n        {\n          id: \"5\",\n          module: \"app.less\",\n          leaf: true\n        },\n        {\n          id: \"6\",\n          module: \"index.html\",\n          leaf: true\n        }\n      ]\n    },\n    {\n      id: \"root-3\",\n      module: \"lib\",\n      children: [\n        {\n          id: \"7\",\n          module: \"node.js\",\n          leaf: true\n        },\n        {\n          id: \"8\",\n          module: \"react-ui-tree.js\",\n          leaf: true\n        },\n        {\n          id: \"9\",\n          module: \"react-ui-tree.less\",\n          leaf: true\n        },\n        {\n          id: \"10\",\n          module: \"tree.js\",\n          leaf: true\n        }\n      ]\n    },\n    {\n      id: \"11\",\n      module: \".gitiignore\",\n      leaf: true\n    },\n    {\n      id: \"12\",\n      module: \"index.js\",\n      leaf: true\n    },\n    {\n      id: \"13\",\n      module: \"LICENSE\",\n      leaf: true\n    },\n    {\n      id: \"14\",\n      module: \"Makefile\",\n      leaf: true\n    },\n    {\n      id: \"15\",\n      module: \"package.json\",\n      leaf: true\n    },\n    {\n      id: \"16\",\n      module: \"README.md\",\n      leaf: true\n    },\n    {\n      id: \"17\",\n      module: \"webpack.config.js\",\n      leaf: true\n    }\n  ]\n};\n"],"sourceRoot":""}